# 시스템 설계 면접 공략법

## 효과적 면접을 위한 4단계 접근법

### 1. 문제 이해 및 설계 범위 확정

요구사항을 완전히 이해하지 않고 답을 내놓지 말자. 깊이 생각하고 질문하여 요구사항과 가정들을 분명히 하자.

<br>

요구사항을 정확히 이해하는 데 필요한 아래와 같은 질문들을 할 수 있다.

- 구체적으로 어떤 기능을 만들어야 하나?
- 제품 사용자 수는?
- 회사의 규모는 얼마나 빨리 커지리라 예상하나? 3달, 6달, 1년 뒤의 규모는?
- 회사가 주로 사용하는 기술 스택은? 설계를 단순화하기 위해 활용할 수 있는 기존 서비스로는 어떤게 있나?

### 2. 개략적인 설계안 제시 및 동의 구하기

설계안의 최초 청사진을 제시하고 의견을 구하라.

핵심 컴포넌트를 포함하는 다이어그램을 그려라. 클라이언트, API, 웹 서버, 데이터 저장소, 캐시, CDN, 메세지 큐 등이 포함될 수 있다.

시스템 규모에 관계된 제약사항들을 만족하는지를 개략적으로 계산해보라.

<br>

**예제**

“뉴스 피드 시스템을 설계하라”는 요구사항이 있다면 개략적 설계는 어떻게 만들어낼까?

개략적으로 보면 피드 발행과 피드 생성 두 가지 처리 flow로 나눠 생각해볼 수 있다.

- 피드 발행
  - 사용자가 포스트를 올리면 데이터가 캐시/DB에 기록되고, 해당 사용자의 친구 뉴스 피드에 뜬다.
- 피드 생성
  - 어떤 사용자의 뉴스 피드는 해당 사용자 친구들의 포스트를 시간 역순으로 정렬하여 만든다.

아래 그림은 **피드 발행**과 **피드 생성** flow의 개략적인 그림이다.

![image](https://github.com/gusals00/mentoring/assets/87007552/2e656a2a-dbf1-4267-a0ee-a507d5ab0d47)


### 3. 상세 설계

이 단계까지 왔다면 아래와 같은 것들이 달성 된 상태일 것이다.

- 시스템에서 전반적으로 달성해야 할 목표와 기능 범위 확인
- 전체 설계의 개략적 청사진 마련
- 해당 청사진에 대한 면접관의 의견
- 상세 설계에서 집중해야 할 영역들 확인

이제 해야할 일은 설계 대상 컴포넌트 사이의 우선순위를 정하는 것이다.

시스템의 병목 구간이나 자원 요구량 추정치 같은 시스템의 성능 특성에 관한 내용이나, 특정 시스템 컴포넌트들의 세부사항을 깊이 있게 설명하는 것을 원할 수 있다.

**예제**

1. 피드 발행

![image](https://github.com/gusals00/mentoring/assets/87007552/9c90f360-d28a-49ae-960a-21eea5da93f1)


2. 뉴스 피드 가져오기

![image](https://github.com/gusals00/mentoring/assets/87007552/f8361d3c-ce97-4cc4-89bb-42d13500fd43)


### 4. 마무리

설계 결과물에 관한 후속 질문이나 스스로 추가 논의를 진행하도록 할 수 있다.

- 시스템 병목구간, 혹은 좀 더 개선 가능한 지점을 찾아내라고 주문할 수 있다.
- 오류가 발생하면 무슨 일이 생기는지(서버 오류, 네트워크 장애 등)을 따져볼 수 있다.
- 운영 이슈도 논의할 수 있다. 메트릭은 어떻게 수집하고 모니터링 할 것인가? 시스템을 어떻게 배포해 나갈 것인가?
- 미래의 규모 확장 요구에 어떻게 대처할 것인가? 예를 들어 현재 설계로 백만 사용자를 감당할 수 있다고 하면, 천만 사용자를 감당하려면 어떻게 해야 할까?

### 해야 할 것

- 질문을 통해 확인하라. 스스로 내린 가정이 옳다고 믿고 진행하지 말라.
- 문제의 요구사항을 정확히 이해해라.
- 가능하다면 여러 해법을 함께 제시하라.
- 면접관의 아이디어를 이끌어 내라.
- 포기하지 말라.

### 하지 말아야 할 것

- 요구사항이나 가정들을 분명히 하지 않은 상태에서 설계를 제시하지 말라.
- 처음부터 특정 컴포넌트의 세부사항을 너무 깊이 설명하지 말라. 개략적 설계를 마친 뒤에 세부사항으로 나아가라.
- 진행 중에 막혔다면, 힌트를 청하는 것을 주저하지 말라.
- 소통을 주저하지 말라.